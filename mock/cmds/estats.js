'use strict'
const { randomNumber } = require('../utils')

module.exports = function (ctx, state) {
  const secondsFromStart = Math.floor((Date.now() - state.startTime) / 1000)
  return `STATUS=S,When=${secondsFromStart},Code=70,Msg=CGMiner stats,Description=cgminer 4.11.1|STATS=0,ID=AVA100,Elapsed=${secondsFromStart},Calls=0,Wait=0.000000,Max=0.000000,Min=0.000000,MM ID0=Ver[1346-116-23042501_6d4cd98_d3a493a] DNA[${ctx.serial}] MEMFREE[2059656.2059656] NETFAIL[0 0 0 0 0 0 0 0] SYSTEMSTATU[Work: ${state.suspended ? 'In Idle' : 'In Work'}, Hash Board: 3 ] Elapsed[${secondsFromStart}] BOOTBY[0x05.00000000] LW[0] MH[0 0 0] DHW[0] HW[0] DH[0.000%] Temp[${parseInt(state.currentTemp)}] TMax[${parseInt(state.maxTemp)}] TAvg[${parseInt(state.avgTemp)}] Fan1[0] Fan2[0] FanR[0%] Vo[0] PS[${state.hashPower.join(' ')}] PLL0[2384 1150 2381 10885] PLL1[3931 3590 4443 4836] PLL2[2731 1555 2981 9533] GHSspd[${randomNumber(118800, 118900).toString()}] DHspd[0.000%] GHSmm[0.00] GHSavg[0.00] WU[0.00] Freq[${state.freq}] Led[${state.led ? '1' : '0'}] MGHS[0.00 0.00 0.00] MTmax[${state.mtMax.join(' ')}] MTavg[${state.mtAvg.join(' ')}] TA[0] Core[A3200C] PING[0] POWS[0] EEPROM[120 120 120] HASHS[0 0 0] POOLS[${ctx.error ? 1 : 0}] SoftOFF[${state.suspended ? '1' : '0'}] ECHU[${ctx.error ? 512 : 0}] ECMM[${ctx.error ? 1 : 0}] SF0[100 100 100 100] SF1[100 100 100 100] SF2[100 100 100 100] PVT_T0[${state.chipTemps.join('  ')}] PVT_T1[${state.chipTemps.join('  ')}] PVT_T2[${state.chipTemps.join('  ')}] PVT_V0[${state.chipVoltages.join('  ')}] PVT_V1[${state.chipVoltages.join('  ')}] PVT_V2[${state.chipVoltages.join('  ')}] MW[ 0 0 0] MW0[] MW1[] MW2[] CRC[0 0 0] FACOPTS0[] FACOPTS1[] FACOPTS2[] ATAOPTS0[--avalon10-freq 448:468:488:508 --avalon10-voltage-level 1272 --hash-asic 120] ATAOPTS1[--avalon10-freq 560:580:600:620 --avalon10-voltage-level 1303 --hash-asic 120] ATAOPTS2[--avalon10-freq 560:580:600:620 --avalon10-voltage-level 1303 --hash-asic 120 --power-level 0] ADJ[1] COP[0 0 0] MPO[${state.power}] MVL[87] ATABD0[560 580 600 620] ATABD1[560 580 600 620] ATABD2[560 580 600 620] WORKMODE[${state.workMode}],MM Count=0,Smart Speed=1,Voltage Level Offset=0,Nonce Mask=0| `
}
